import { splitArrayToChunks } from './helpers.js'

describe('helpers', () => {
  it('should split array to chunks', () => {
    const array = [1, 2, 3, 4, 5, 6, 7, 8, 9]
    const chunks = splitArrayToChunks({ array, chunkSize: 10 })
    expect(chunks).toEqual([array])
  })

  it('should split array to chunks with filter', () => {
    const array = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    const chunks = splitArrayToChunks({
      array,
      chunkSize: 10,
      filter: (item) => item % 2 === 0,
    })
    expect(chunks).toEqual([[2, 4, 6, 8, 10]])
  })

  it('should split array to chunks with filter and chunk size higher chunk size', () => {
    const array = [
      1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,
      22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39,
      40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54,
    ]
    const chunks = splitArrayToChunks({ array, chunkSize: 10 })
    expect(chunks).toEqual([
      [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
      [11, 12, 13, 14, 15, 16, 17, 18, 19, 20],
      [21, 22, 23, 24, 25, 26, 27, 28, 29, 30],
      [31, 32, 33, 34, 35, 36, 37, 38, 39, 40],
      [41, 42, 43, 44, 45, 46, 47, 48, 49, 50],
      [51, 52, 53, 54],
    ])
  })

  it('should split array to chunks with filter and chunk size higher chunk size pyth price feeds', () => {
    const array = [
      '7a5bc1d2b56ad029048cd63964b3ad2776eadf812edc1a43a31406cb54bff592',
      '2b89b9dc8fdf9f34709a5b106b472f0f39bb6ca9ce04b0fd7f2e971688e2e53b',
      'eaa020c61cc479712813461ce153894a96a6c00b21ed0cfc2798d1f9a9e9c94a',
      'ec5d399846a9209f3fe5881d70aae9268c94339ff9817e8d18ff19fa05eea1c8',
      'b00b60f88b03a6a625a8d1c048c3f66653edf217439983d037e7222c4e612819',
      'e62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43',
      'ff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace',
      '60144b1d5c9e9851732ad1d9760e3485ef80be39b984f6bf60f82b28a2b7f126',
      'ef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d',
      '2f95862b045670cd22bee3114c39763a4a08beeb663b145d283c31d7d1101c4f',
      '5867f5683c757393a0670ef0f701490950fe93fdb006d181c8265a831ac0c5c6',
      '53614f1cb0c031d4af66c04cb9c756234adad0e1cee85303795091499a4084eb',
      '0bbf28e9a841a1cc788f6a361b17ca072d0ea3098a1e5df1c3922d06719579ff',
      '09f7c1d7dfbb7df2b8fe3d3d87ee94a2259d212da4f30c1f0540d066dfa44723',
      '93da3352f9f1d105fdfe4971cfa80e9dd777bfc5d0f683ebb6e1294b92137bb7',
      '4ca4beeca86f0d164160323817a4e42b10010a724c2217c6ee41b54cd4cc61fc',
      '23d7315113f5b1d3ba7a83604c44b94d79f4fd69af77f804fc7f920a6dc65744',
      '3fa4252848f9f0a1480be62745a4629d9eb1322aebab8a791e344b3b9c1adcf5',
      '385f64d993f7b77d8182ed5003d97c60aa3361f3cecfe711544d2d59165e9bdf',
      '8ac0c70fff57e9aefdf5edf44b51d62c2d433653cbb2cf5cc06bb115af04d221',
      'dcef50dd0a4cd2dcc17e45df1676dcb336a11a61c69df7a0299b0150c672d25c',
      '765d2ba906dbc32ca17cc11f5310a89e9ee1f6420508c63861f2f8ba4ee34bb2',
      'f2fb02c32b055c805e7238d628e5e9dadef274376114eb1f012337cabe93871e',
      'a995d00bb36a63cef7fd2c287dc105fc8f3d93779f062f09551b0af3e81ec30b',
      '84c2dde9633d93d1bcad84e7dc41c9d56578b7ec52fabedc1f335d673df0a7c1',
      '2b9ab1e972a281585084148ba1389800799bd4be63b957507db1349314e47445',
      '9375299e31c0deb9c6bc378e6329aab44cb48ec655552a70d4b9050346a30378',
      '8963217838ab4cf5cadc172203c1f0b763fbaa45f346d8ee50ba994bbcac3026',
      'd69731a2e74ac1ce884fc3890f7ee324b6deb66147055249568869ed700882e4',
      '03ae4db29ed4ae33d323568895aa00337e658e348b37509f5372ae51f0af00d5',
      '410f41de235f2db824e562ea7ab2d3d3d4ff048316c61d629c0b93f58584e1af',
      'ec7a775f46379b5e943c3526b1c8d54cd49749176b0b98e02dde68d1bd335c17',
      '46b8cc9347f04391764a0361e0b17c3ba394b001e7c304f7650f6376e37c321d',
      'bed3097008b9b5e3c93bec20be79cb43986b85a996475589351a21e67bae9b61',
      'f6b551a947e7990089e2d5149b1e44b369fcc6ad3627cb822362a2b19d24ad4a',
      '8414cfadf82f6bed644d2e399c11df21ec0131aa574c56030b132113dbbf3a0a',
      'd9912df360b5b7f21a122f15bdd5e27f62ce5e72bd316c291f7c86620e07fb2a',
      '436ccb0d465f3cb48554bcc8def65ff695341b3ebe0897563d118b9291178d0f',
      '4279e31cc369bbcc2faf022b382b080e32a8e689ff20fbc530d2a603eb6cd98b',
      'eff7446475e218517566ea99e72a4abec2e1bd8498b43b7d8331e29dcb059389',
      '3bd860bea28bf982fa06bcf358118064bb114086cc03993bd76197eaab0b8018',
      '6bf748c908767baa762a1563d454ebec2d5108f8ee36d806aadacc8f0a075b6d',
      '19e09bb805456ada3979a7d1cbb4b6d63babc3a0f8e8a9509f68afa5c4c11cd5',
      '962088abcfdbdb6e30db2e340c8cf887d9efb311b1f2f17b155a63dbb6d40265',
      'ef8382df144cd3289a754b07bfb51acbe5bbc47444c36f727169c06387469ac6',
      '9695e2b96ea7b3859da9ed25b7a46a920a776e2fdae19a7bcfdf2b219230452d',
      'b1073854ed24cbc755dc527418f52b7d271f6cc967bbf8d8129112b18860a593',
      '6e3f3fa8253588df9326580180233eb791e03b443a3ba7a1d892e73874e19a54',
      'fee33f2a978bf32dd6b662b65ba8083c6773b494f8401194ec1870c640860245',
      'e1e80251e5f5184f2195008382538e847fafc36f751896889dd3d1b1f6111f09',
      '306736a4035846ba15a3496eed57225b64cc19230a50d14f3ed20fd7219b7849',
      '16dad506d7db8da01c87581c87ca897a012a153557d4d578c3b9c9e1bc0632f1',
      'd3178156b7c0f6ce10d6da7d347952a672467b51708baaf1a57ffe1fb005824a',
      '11a70634863ddffb71f2b11f2cff29f73f3db8f6d0b78c49f2b5f4ad36e885f0',
      'b5d0e0fa58a1f8b81498ae670ce93c872d14434b72c364885d4fa1b257cbb07a',
      '8f34132a42f8bb7a47568d77a910f97174a30719e16904e9f2915d5b2c6c2d52',
      '5a48c03e9b9cb337801073ed9d166817473697efff0d138874e0f6a33d6d5aa6',
    ]
    const chunks = splitArrayToChunks({ array, chunkSize: 10 })
    expect(chunks).toEqual([
      [
        '7a5bc1d2b56ad029048cd63964b3ad2776eadf812edc1a43a31406cb54bff592',
        '2b89b9dc8fdf9f34709a5b106b472f0f39bb6ca9ce04b0fd7f2e971688e2e53b',
        'eaa020c61cc479712813461ce153894a96a6c00b21ed0cfc2798d1f9a9e9c94a',
        'ec5d399846a9209f3fe5881d70aae9268c94339ff9817e8d18ff19fa05eea1c8',
        'b00b60f88b03a6a625a8d1c048c3f66653edf217439983d037e7222c4e612819',
        'e62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43',
        'ff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace',
        '60144b1d5c9e9851732ad1d9760e3485ef80be39b984f6bf60f82b28a2b7f126',
        'ef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d',
        '2f95862b045670cd22bee3114c39763a4a08beeb663b145d283c31d7d1101c4f',
      ],
      [
        '5867f5683c757393a0670ef0f701490950fe93fdb006d181c8265a831ac0c5c6',
        '53614f1cb0c031d4af66c04cb9c756234adad0e1cee85303795091499a4084eb',
        '0bbf28e9a841a1cc788f6a361b17ca072d0ea3098a1e5df1c3922d06719579ff',
        '09f7c1d7dfbb7df2b8fe3d3d87ee94a2259d212da4f30c1f0540d066dfa44723',
        '93da3352f9f1d105fdfe4971cfa80e9dd777bfc5d0f683ebb6e1294b92137bb7',
        '4ca4beeca86f0d164160323817a4e42b10010a724c2217c6ee41b54cd4cc61fc',
        '23d7315113f5b1d3ba7a83604c44b94d79f4fd69af77f804fc7f920a6dc65744',
        '3fa4252848f9f0a1480be62745a4629d9eb1322aebab8a791e344b3b9c1adcf5',
        '385f64d993f7b77d8182ed5003d97c60aa3361f3cecfe711544d2d59165e9bdf',
        '8ac0c70fff57e9aefdf5edf44b51d62c2d433653cbb2cf5cc06bb115af04d221',
      ],
      [
        'dcef50dd0a4cd2dcc17e45df1676dcb336a11a61c69df7a0299b0150c672d25c',
        '765d2ba906dbc32ca17cc11f5310a89e9ee1f6420508c63861f2f8ba4ee34bb2',
        'f2fb02c32b055c805e7238d628e5e9dadef274376114eb1f012337cabe93871e',
        'a995d00bb36a63cef7fd2c287dc105fc8f3d93779f062f09551b0af3e81ec30b',
        '84c2dde9633d93d1bcad84e7dc41c9d56578b7ec52fabedc1f335d673df0a7c1',
        '2b9ab1e972a281585084148ba1389800799bd4be63b957507db1349314e47445',
        '9375299e31c0deb9c6bc378e6329aab44cb48ec655552a70d4b9050346a30378',
        '8963217838ab4cf5cadc172203c1f0b763fbaa45f346d8ee50ba994bbcac3026',
        'd69731a2e74ac1ce884fc3890f7ee324b6deb66147055249568869ed700882e4',
        '03ae4db29ed4ae33d323568895aa00337e658e348b37509f5372ae51f0af00d5',
      ],
      [
        '410f41de235f2db824e562ea7ab2d3d3d4ff048316c61d629c0b93f58584e1af',
        'ec7a775f46379b5e943c3526b1c8d54cd49749176b0b98e02dde68d1bd335c17',
        '46b8cc9347f04391764a0361e0b17c3ba394b001e7c304f7650f6376e37c321d',
        'bed3097008b9b5e3c93bec20be79cb43986b85a996475589351a21e67bae9b61',
        'f6b551a947e7990089e2d5149b1e44b369fcc6ad3627cb822362a2b19d24ad4a',
        '8414cfadf82f6bed644d2e399c11df21ec0131aa574c56030b132113dbbf3a0a',
        'd9912df360b5b7f21a122f15bdd5e27f62ce5e72bd316c291f7c86620e07fb2a',
        '436ccb0d465f3cb48554bcc8def65ff695341b3ebe0897563d118b9291178d0f',
        '4279e31cc369bbcc2faf022b382b080e32a8e689ff20fbc530d2a603eb6cd98b',
        'eff7446475e218517566ea99e72a4abec2e1bd8498b43b7d8331e29dcb059389',
      ],
      [
        '3bd860bea28bf982fa06bcf358118064bb114086cc03993bd76197eaab0b8018',
        '6bf748c908767baa762a1563d454ebec2d5108f8ee36d806aadacc8f0a075b6d',
        '19e09bb805456ada3979a7d1cbb4b6d63babc3a0f8e8a9509f68afa5c4c11cd5',
        '962088abcfdbdb6e30db2e340c8cf887d9efb311b1f2f17b155a63dbb6d40265',
        'ef8382df144cd3289a754b07bfb51acbe5bbc47444c36f727169c06387469ac6',
        '9695e2b96ea7b3859da9ed25b7a46a920a776e2fdae19a7bcfdf2b219230452d',
        'b1073854ed24cbc755dc527418f52b7d271f6cc967bbf8d8129112b18860a593',
        '6e3f3fa8253588df9326580180233eb791e03b443a3ba7a1d892e73874e19a54',
        'fee33f2a978bf32dd6b662b65ba8083c6773b494f8401194ec1870c640860245',
        'e1e80251e5f5184f2195008382538e847fafc36f751896889dd3d1b1f6111f09',
      ],
      [
        '306736a4035846ba15a3496eed57225b64cc19230a50d14f3ed20fd7219b7849',
        '16dad506d7db8da01c87581c87ca897a012a153557d4d578c3b9c9e1bc0632f1',
        'd3178156b7c0f6ce10d6da7d347952a672467b51708baaf1a57ffe1fb005824a',
        '11a70634863ddffb71f2b11f2cff29f73f3db8f6d0b78c49f2b5f4ad36e885f0',
        'b5d0e0fa58a1f8b81498ae670ce93c872d14434b72c364885d4fa1b257cbb07a',
        '8f34132a42f8bb7a47568d77a910f97174a30719e16904e9f2915d5b2c6c2d52',
        '5a48c03e9b9cb337801073ed9d166817473697efff0d138874e0f6a33d6d5aa6',
      ],
    ])
  })
})
